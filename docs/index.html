<!doctype html>
<html>
       <head>
        <title>Joust Game - LibGDX Web Version</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta id="gameViewport" name="viewport" content="width=device-width initial-scale=1">
        <link href="styles.css" rel="stylesheet" type="text/css">
       </head>

       <body>
          <!-- Removed Super Dev Mode link that was causing localhost:9876 connection errors -->
          
          <div id="embed-html"></div>
          
          <div id="gameContainer">
              <div id="loadingMessage">Loading Joust Game...</div>
              <div id="debugInfo" style="color: yellow; font-size: 12px; margin-top: 10px;"></div>
          </div>
          
          <script type="text/javascript" src="html/html.nocache.js"></script>
       </body>

       <script>
        // Debug logging function
        function debugLog(message) {
          console.log('[DEBUG] ' + message);
          const debugDiv = document.getElementById('debugInfo');
          if (debugDiv) {
            debugDiv.innerHTML += '<br>' + new Date().toISOString() + ': ' + message;
          }
        }

        // Log when page loads
        debugLog('Page loaded, starting game initialization...');

        // Monitor for GWT loading
        let gwtCheckInterval = setInterval(function() {
          if (window.com && window.com.joust) {
            debugLog('GWT game classes loaded successfully');
            clearInterval(gwtCheckInterval);
          } else {
            debugLog('Waiting for GWT compilation to load...');
          }
        }, 1000);

        // Stop checking after 30 seconds
        setTimeout(function() {
          clearInterval(gwtCheckInterval);
          debugLog('Stopped waiting for GWT after 30 seconds');
        }, 30000);

        // Monitor for canvas creation (game start)
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.addedNodes) {
              for (let node of mutation.addedNodes) {
                if (node.tagName === 'CANVAS') {
                  debugLog('Game canvas created - game should be starting!');
                  document.getElementById('loadingMessage').style.display = 'none';
                }
              }
            }
          });
        });
        observer.observe(document.body, { childList: true, subtree: true });

        function handleMouseDown(evt) {
          evt.preventDefault();
          evt.stopPropagation();
          evt.target.style.cursor = 'default';
        }

        function handleMouseUp(evt) {
          evt.preventDefault();
          evt.stopPropagation();
          evt.target.style.cursor = '';
        }

        document.addEventListener('mousedown', handleMouseDown, false);
        document.addEventListener('mouseup', handleMouseUp, false);

        // Log any JavaScript errors
        window.addEventListener('error', function(e) {
          debugLog('JavaScript Error: ' + e.message + ' at ' + e.filename + ':' + e.lineno);
        });

        debugLog('Debug logging initialized');
       </script>
</html> 